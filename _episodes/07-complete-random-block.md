---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 07-complete-random-block.md in _episodes_rmd/
title: "Randomized Complete Block Designs"
teaching: 0
exercises: 0
questions:
- "What is randomized complete block design?"
objectives:
- "A randomized complete block design randomizes treatments to experimental units within the block."
- "Blocking increases the precision of treatment comparisons."
keypoints:
- "Replication, randomization and blocking determine the validity and usefulness of an experiment."
source: Rmd
---




## Design issues

Imagine that you want to evaluate the effect of different 
doses of a new drug on the proliferation of cancer cell lines in vitro. You use
four different cancer cell lines because you would like the results to 
generalize to many types of cell lines. Divide each of the cell lines into four 
treatment groups, each with the same number of cells. Each treatment group
receives a different dose of the drug for five consecutive days.

Group 1: Control (no drug)  
Group 2: Low dose (10 μM) 
Group 3: Medium dose (50 μM) 
Group 4: High dose (100 μM) 


~~~
# create treatment levels
f <- factor(c("control", "low", "medium", "high"))

# create random orderings of the treatment levels
block1 <- sample(f, 4)
block2 <- sample(f, 4)
block3 <- sample(f, 4)
block4 <- sample(f, 4)
treatment <- c(block1, block2, block3, block4)
block <- factor(rep(c("cellLine1", "cellLine2", "cellLine3", "cellLine4"), each = 4))
dishnum <- rep(1:4, 4)
plan <- data.frame(cellLine = block, DishNumber = dishnum, treatment = treatment)
plan
~~~
{: .language-r}



~~~
    cellLine DishNumber treatment
1  cellLine1          1   control
2  cellLine1          2       low
3  cellLine1          3    medium
4  cellLine1          4      high
5  cellLine2          1   control
6  cellLine2          2       low
7  cellLine2          3      high
8  cellLine2          4    medium
9  cellLine3          1      high
10 cellLine3          2   control
11 cellLine3          3       low
12 cellLine3          4    medium
13 cellLine4          1      high
14 cellLine4          2       low
15 cellLine4          3   control
16 cellLine4          4    medium
~~~
{: .output}

When analyzing a random complete block design, the effect of the block is 
included in the equation along with the effect of the treatment. 

## Randomized block design with a single replication



~~~
exp_unit <- LETTERS
random_number <- sample(x = 100, size = 26)

# %% is the modulo operator, which returns the remainder from division
treatment <- ifelse(random_number %% 2 == 0, "chow", "high fat")
random_allocation <- data.frame(exp_unit, random_number, treatment)
random_allocation
~~~
{: .language-r}



~~~
   exp_unit random_number treatment
1         A            95  high fat
2         B            38      chow
3         C             2      chow
4         D            32      chow
5         E            55  high fat
6         F            17  high fat
7         G            24      chow
8         H            31  high fat
9         I            90      chow
10        J            18      chow
11        K            82      chow
12        L            98      chow
13        M            68      chow
14        N            47  high fat
15        O            41  high fat
16        P            26      chow
17        Q            11  high fat
18        R            72      chow
19        S            27  high fat
20        T            83  high fat
21        U             8      chow
22        V            60      chow
23        W            37  high fat
24        X            51  high fat
25        Y            33  high fat
26        Z            13  high fat
~~~
{: .output}

## Sizing a randomized block experiment


~~~
write.csv(equal_allocation, file = "random-assign.csv", row.names = FALSE)
~~~
{: .language-r}



~~~
Error in is.data.frame(x): object 'equal_allocation' not found
~~~
{: .error}
> ## Discussion
> Why not assign treatment and control groups to samples in alphabetical order?  
> Did we really need a random number generator to obtain randomized equal groups?
>
> >
> > ## Solution 
> > 
> > 1). Scenario: One technician processed samples A through M, and a different 
> > technician processed samples N through Z.  
> > 2). Another scenario: Samples A through M were processed on a Monday, and 
> > samples N through Z on a Tuesday.  
> > 3). Yet another scenario: Samples A through M were from one strain, and 
> > samples N through Z from a different strain.    
> > 4). Yet another scenario: Samples with consecutive ids were all sibling 
> > groups. For example, samples A, B and C were all siblings, and all assigned 
> > to the same treatment.  
> > All of these cases would have introduced an effect (from the technician, the 
> > day of the week, the strain, or sibling relationships) that would confound 
> > the results and lead to misinterpretation.
> > 
> {: .solution}
{: .challenge}

## True replication

## Balanced incomplete block designs

{% include links.md %}
