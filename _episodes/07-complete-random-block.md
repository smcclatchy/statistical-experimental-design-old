---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 07-complete-random-block.md in _episodes_rmd/
title: "Randomized Complete Block Designs"
teaching: 0
exercises: 0
questions:
- "What is randomized complete block design?"
objectives:
- "A randomized complete block design randomizes treatments to experimental units within the block."
- "Blocking increases the precision of treatment comparisons."
keypoints:
- "Replication, randomization and blocking determine the validity and usefulness of an experiment."
source: Rmd
---




## Design issues

> ## Exercise 1: Which kind of error?
> A study used to determine the effect of a drug on weight loss 
> could have the following sources of experimental error. 
> Classify the following sources as either biological, 
> systematic, or random error.  
> 1). A scale is broken and provides inconsistent readings.  
> 2). A scale is calibrated wrongly and consistently measures mice 1 gram heavier.   
> 3). A mouse has an unusually high weight compared to its experimental group (i.e., it is an outlier).  
> 4). Strong atmospheric low pressure and accompanying storms affect instrument readings, animal behavior, and indoor relative humidity.  
>
> >
> > ## Solution to Exercise 1
> > 
> > 1). random, because the scale is broken and provides any kind of random reading it comes up with (inconsistent reading)  
> > 2). systematic  
> > 3). biological  
> > 4). random or systematic; you argue which and explain why
> > 
> {: .solution}
{: .challenge}


## Randomized block design with a single replication



~~~
exp_unit <- LETTERS
random_number <- sample(x = 100, size = 26)

# %% is the modulo operator, which returns the remainder from division
treatment <- ifelse(random_number %% 2 == 0, "chow", "high fat")
random_allocation <- data.frame(exp_unit, random_number, treatment)
random_allocation
~~~
{: .language-r}



~~~
   exp_unit random_number treatment
1         A            75  high fat
2         B            72      chow
3         C            65  high fat
4         D            48      chow
5         E             7  high fat
6         F            35  high fat
7         G            69  high fat
8         H            12      chow
9         I            25  high fat
10        J            42      chow
11        K            81  high fat
12        L            89  high fat
13        M            16      chow
14        N            57  high fat
15        O            13  high fat
16        P            64      chow
17        Q            79  high fat
18        R            55  high fat
19        S            39  high fat
20        T            96      chow
21        U            36      chow
22        V            93  high fat
23        W            88      chow
24        X            15  high fat
25        Y            85  high fat
26        Z            51  high fat
~~~
{: .output}

## Sizing a randomized block experiment


~~~
write.csv(equal_allocation, file = "random-assign.csv", row.names = FALSE)
~~~
{: .language-r}



~~~
Error in is.data.frame(x): object 'equal_allocation' not found
~~~
{: .error}
> ## Discussion
> Why not assign treatment and control groups to samples in alphabetical order?  
> Did we really need a random number generator to obtain randomized equal groups?
>
> >
> > ## Solution 
> > 
> > 1). Scenario: One technician processed samples A through M, and a different 
> > technician processed samples N through Z.  
> > 2). Another scenario: Samples A through M were processed on a Monday, and 
> > samples N through Z on a Tuesday.  
> > 3). Yet another scenario: Samples A through M were from one strain, and 
> > samples N through Z from a different strain.    
> > 4). Yet another scenario: Samples with consecutive ids were all sibling 
> > groups. For example, samples A, B and C were all siblings, and all assigned 
> > to the same treatment.  
> > All of these cases would have introduced an effect (from the technician, the 
> > day of the week, the strain, or sibling relationships) that would confound 
> > the results and lead to misinterpretation.
> > 
> {: .solution}
{: .challenge}

## True replication

## Balanced incomplete block designs





Experimental units can be grouped, or *blocked*, to increase the precision of
treatment comparisons. Imagine that you want to evaluate the effect of different 
doses of a new drug on the proliferation of cancer cells in vitro. Divide the 
cells into four groups, each consisting of the same number of cells. Treat each 
group with a different dose of the drug for five consecutive days. For example, 
the four treatments could be:

Group 1: Control (no drug)
Group 2: Low dose (10 μM)
Group 3: Medium dose (50 μM)
Group 4: High dose (100 μM)


~~~
# create dosage levels
f <- factor(c("control", "low", "medium", "high"))
b1t <- sample(f, 4)
b2t <- sample(f, 4)
b3t <- sample(f, 4)
b4t <- sample(f, 4)
t <- c(b1t, b2t, b3t, b4t)
block <- factor(rep(c("shelf1", "shelf2", "shelf3", "shelf4"), each = 4))
cagenum <- rep(1:4, 4)
plan <- data.frame(block = block, CageNumber = cagenum, treatment = t)
plan
~~~
{: .language-r}



~~~
    block CageNumber treatment
1  shelf1          1   control
2  shelf1          2       low
3  shelf1          3      high
4  shelf1          4    medium
5  shelf2          1    medium
6  shelf2          2      high
7  shelf2          3   control
8  shelf2          4       low
9  shelf3          1    medium
10 shelf3          2   control
11 shelf3          3       low
12 shelf3          4      high
13 shelf4          1    medium
14 shelf4          2       low
15 shelf4          3      high
16 shelf4          4   control
~~~
{: .output}
{% include links.md %}
